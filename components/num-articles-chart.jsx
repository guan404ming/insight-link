"use client"

import * as React from "react"
import { Bar, BarChart, Area, AreaChart, CartesianGrid, XAxis, YAxis, LabelList, CardFooter} from "recharts"
import { DatePickerWithRange } from "./date-picker-range"
import { neon } from '@neondatabase/serverless'


import {
  Card,
  CardContent,
  CardDescription,
  CardHeader,
  CardTitle,
} from "@/components/ui/card"
import {
  ChartConfig,
  ChartContainer,
  ChartLegend,
  ChartLegendContent,
  ChartTooltip,
  ChartTooltipContent,
} from "@/components/ui/chart"
import { date } from "drizzle-orm/mysql-core"
import { set } from "date-fns"

const chartConfig = {
  articles: {
    label: "Articles",
  },
  date: {
    label: "date",
  },
  ms: {
    label: "Mainstream Media",
    color: "hsl(var(--chart-1))",
  },
  nms: {
    label: "Non-mainstream Media",
    color: "hsl(var(--chart-2))",
  },
} 

const chartConfigThemes = {
  theme_count: {
    label: "Number of Mentions",
  },
  theme_name: {
    label: "Name",
    color: "hsl(var(--chart-1))",
  },
}

/*
const chartData = [
  {
    "date": "2020-01-30",
    "ms": 1,
    "nms": 0
  }, {
    "date": "2020-01-31",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-02-01",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-02-02",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-02-03",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-02-04",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-02-05",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-02-06",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-02-07",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-02-08",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-02-09",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-02-10",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-02-11",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-02-12",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-02-13",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-02-14",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-02-15",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-02-16",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-02-17",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-02-18",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-02-19",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-02-20",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-02-21",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-02-22",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-02-23",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-02-24",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-02-25",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-02-26",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-02-27",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-02-28",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-02-29",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-03-01",
    "ms": 0,
    "nms": 2
  }, {
    "date": "2020-03-02",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-03-03",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-03-04",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-03-05",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-03-06",
    "ms": 0,
    "nms": 1
  }, {
    "date": "2020-03-07",
    "ms": 0,
    "nms": 1
  }, {
    "date": "2020-03-08",
    "ms": 1,
    "nms": 0
  }, {
    "date": "2020-03-09",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-03-10",
    "ms": 0,
    "nms": 1
  }, {
    "date": "2020-03-11",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-03-12",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-03-13",
    "ms": 0,
    "nms": 1
  }, {
    "date": "2020-03-14",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-03-15",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-03-16",
    "ms": 0,
    "nms": 1
  }, {
    "date": "2020-03-17",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-03-18",
    "ms": 0,
    "nms": 1
  }, {
    "date": "2020-03-19",
    "ms": 1,
    "nms": 0
  }, {
    "date": "2020-03-20",
    "ms": 0,
    "nms": 7
  }, {
    "date": "2020-03-21",
    "ms": 0,
    "nms": 1
  }, {
    "date": "2020-03-22",
    "ms": 0,
    "nms": 1
  }, {
    "date": "2020-03-23",
    "ms": 0,
    "nms": 3
  }, {
    "date": "2020-03-24",
    "ms": 1,
    "nms": 2
  }, {
    "date": "2020-03-25",
    "ms": 0,
    "nms": 2
  }, {
    "date": "2020-03-26",
    "ms": 1,
    "nms": 4
  }, {
    "date": "2020-03-27",
    "ms": 0,
    "nms": 1
  }, {
    "date": "2020-03-28",
    "ms": 1,
    "nms": 0
  }, {
    "date": "2020-03-29",
    "ms": 0,
    "nms": 2
  }, {
    "date": "2020-03-30",
    "ms": 0,
    "nms": 1
  }, {
    "date": "2020-03-31",
    "ms": 0,
    "nms": 1
  }, {
    "date": "2020-04-01",
    "ms": 1,
    "nms": 2
  }, {
    "date": "2020-04-02",
    "ms": 0,
    "nms": 3
  }, {
    "date": "2020-04-03",
    "ms": 1,
    "nms": 0
  }, {
    "date": "2020-04-04",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-04-05",
    "ms": 1,
    "nms": 0
  }, {
    "date": "2020-04-06",
    "ms": 0,
    "nms": 2
  }, {
    "date": "2020-04-07",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-04-08",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-04-09",
    "ms": 1,
    "nms": 3
  }, {
    "date": "2020-04-10",
    "ms": 1,
    "nms": 1
  }, {
    "date": "2020-04-11",
    "ms": 0,
    "nms": 1
  }, {
    "date": "2020-04-12",
    "ms": 0,
    "nms": 3
  }, {
    "date": "2020-04-13",
    "ms": 0,
    "nms": 1
  }, {
    "date": "2020-04-14",
    "ms": 1,
    "nms": 0
  }, {
    "date": "2020-04-15",
    "ms": 0,
    "nms": 2
  }, {
    "date": "2020-04-16",
    "ms": 2,
    "nms": 1
  }, {
    "date": "2020-04-17",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-04-18",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-04-19",
    "ms": 0,
    "nms": 3
  }, {
    "date": "2020-04-20",
    "ms": 0,
    "nms": 2
  }, {
    "date": "2020-04-21",
    "ms": 1,
    "nms": 1
  }, {
    "date": "2020-04-22",
    "ms": 1,
    "nms": 3
  }, {
    "date": "2020-04-23",
    "ms": 0,
    "nms": 4
  }, {
    "date": "2020-04-24",
    "ms": 0,
    "nms": 4
  }, {
    "date": "2020-04-25",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-04-26",
    "ms": 0,
    "nms": 5
  }, {
    "date": "2020-04-27",
    "ms": 0,
    "nms": 1
  }, {
    "date": "2020-04-28",
    "ms": 0,
    "nms": 3
  }, {
    "date": "2020-04-29",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-04-30",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-05-01",
    "ms": 0,
    "nms": 2
  }, {
    "date": "2020-05-02",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-05-03",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-05-04",
    "ms": 0,
    "nms": 2
  }, {
    "date": "2020-05-05",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-05-06",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-05-07",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-05-08",
    "ms": 0,
    "nms": 2
  }, {
    "date": "2020-05-09",
    "ms": 0,
    "nms": 1
  }, {
    "date": "2020-05-10",
    "ms": 0,
    "nms": 1
  }, {
    "date": "2020-05-11",
    "ms": 0,
    "nms": 1
  }, {
    "date": "2020-05-12",
    "ms": 0,
    "nms": 1
  }, {
    "date": "2020-05-13",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-05-14",
    "ms": 0,
    "nms": 1
  }, {
    "date": "2020-05-15",
    "ms": 0,
    "nms": 1
  }, {
    "date": "2020-05-16",
    "ms": 0,
    "nms": 2
  }, {
    "date": "2020-05-17",
    "ms": 2,
    "nms": 0
  }, {
    "date": "2020-05-18",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-05-19",
    "ms": 0,
    "nms": 1
  }, {
    "date": "2020-05-20",
    "ms": 2,
    "nms": 1
  }, {
    "date": "2020-05-21",
    "ms": 0,
    "nms": 3
  }, {
    "date": "2020-05-22",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-05-23",
    "ms": 0,
    "nms": 2
  }, {
    "date": "2020-05-24",
    "ms": 0,
    "nms": 1
  }, {
    "date": "2020-05-25",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-05-26",
    "ms": 0,
    "nms": 2
  }, {
    "date": "2020-05-27",
    "ms": 0,
    "nms": 1
  }, {
    "date": "2020-05-28",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-05-29",
    "ms": 0,
    "nms": 1
  }, {
    "date": "2020-05-30",
    "ms": 0,
    "nms": 1
  }, {
    "date": "2020-05-31",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-06-01",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-06-02",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-06-03",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-06-04",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-06-05",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-06-06",
    "ms": 0,
    "nms": 1
  }, {
    "date": "2020-06-07",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-06-08",
    "ms": 0,
    "nms": 1
  }, {
    "date": "2020-06-09",
    "ms": 0,
    "nms": 3
  }, {
    "date": "2020-06-10",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-06-11",
    "ms": 0,
    "nms": 2
  }, {
    "date": "2020-06-12",
    "ms": 1,
    "nms": 1
  }, {
    "date": "2020-06-13",
    "ms": 1,
    "nms": 0
  }, {
    "date": "2020-06-14",
    "ms": 0,
    "nms": 2
  }, {
    "date": "2020-06-15",
    "ms": 0,
    "nms": 1
  }, {
    "date": "2020-06-16",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-06-17",
    "ms": 0,
    "nms": 1
  }, {
    "date": "2020-06-18",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-06-19",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-06-20",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-06-21",
    "ms": 0,
    "nms": 1
  }, {
    "date": "2020-06-22",
    "ms": 0,
    "nms": 1
  }, {
    "date": "2020-06-23",
    "ms": 0,
    "nms": 1
  }, {
    "date": "2020-06-24",
    "ms": 0,
    "nms": 1
  }, {
    "date": "2020-06-25",
    "ms": 0,
    "nms": 1
  }, {
    "date": "2020-06-26",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-06-27",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-06-28",
    "ms": 0,
    "nms": 1
  }, {
    "date": "2020-06-29",
    "ms": 0,
    "nms": 1
  }, {
    "date": "2020-06-30",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-07-01",
    "ms": 1,
    "nms": 0
  }, {
    "date": "2020-07-02",
    "ms": 0,
    "nms": 1
  }, {
    "date": "2020-07-03",
    "ms": 0,
    "nms": 1
  }, {
    "date": "2020-07-04",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-07-05",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-07-06",
    "ms": 1,
    "nms": 1
  }, {
    "date": "2020-07-07",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-07-08",
    "ms": 0,
    "nms": 1
  }, {
    "date": "2020-07-09",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-07-10",
    "ms": 0,
    "nms": 2
  }, {
    "date": "2020-07-11",
    "ms": 0,
    "nms": 1
  }, {
    "date": "2020-07-12",
    "ms": 2,
    "nms": 0
  }, {
    "date": "2020-07-13",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-07-14",
    "ms": 1,
    "nms": 0
  }, {
    "date": "2020-07-15",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-07-16",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-07-17",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-07-18",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-07-19",
    "ms": 1,
    "nms": 2
  }, {
    "date": "2020-07-20",
    "ms": 0,
    "nms": 1
  }, {
    "date": "2020-07-21",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-07-22",
    "ms": 1,
    "nms": 0
  }, {
    "date": "2020-07-23",
    "ms": 0,
    "nms": 1
  }, {
    "date": "2020-07-24",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-07-25",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-07-26",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-07-27",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-07-28",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-07-29",
    "ms": 0,
    "nms": 1
  }, {
    "date": "2020-07-30",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-07-31",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-08-01",
    "ms": 0,
    "nms": 1
  }, {
    "date": "2020-08-02",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-08-03",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-08-04",
    "ms": 0,
    "nms": 1
  }, {
    "date": "2020-08-05",
    "ms": 0,
    "nms": 1
  }, {
    "date": "2020-08-06",
    "ms": 1,
    "nms": 0
  }, {
    "date": "2020-08-07",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-08-08",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-08-09",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-08-10",
    "ms": 0,
    "nms": 2
  }, {
    "date": "2020-08-11",
    "ms": 0,
    "nms": 1
  }, {
    "date": "2020-08-12",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-08-13",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-08-14",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-08-15",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-08-16",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-08-17",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-08-18",
    "ms": 1,
    "nms": 0
  }, {
    "date": "2020-08-19",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-08-20",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-08-21",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-08-22",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-08-23",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-08-24",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-08-25",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-08-26",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-08-27",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-08-28",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-08-29",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-08-30",
    "ms": 0,
    "nms": 1
  }, {
    "date": "2020-08-31",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-09-01",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-09-02",
    "ms": 0,
    "nms": 1
  }, {
    "date": "2020-09-03",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-09-04",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-09-05",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-09-06",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-09-07",
    "ms": 0,
    "nms": 1
  }, {
    "date": "2020-09-08",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-09-09",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-09-10",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-09-11",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-09-12",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-09-13",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-09-14",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-09-15",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-09-16",
    "ms": 0,
    "nms": 1
  }, {
    "date": "2020-09-17",
    "ms": 1,
    "nms": 0
  }, {
    "date": "2020-09-18",
    "ms": 0,
    "nms": 2
  }, {
    "date": "2020-09-19",
    "ms": 0,
    "nms": 1
  }, {
    "date": "2020-09-20",
    "ms": 0,
    "nms": 1
  }, {
    "date": "2020-09-21",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-09-22",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-09-23",
    "ms": 0,
    "nms": 1
  }, {
    "date": "2020-09-24",
    "ms": 0,
    "nms": 1
  }, {
    "date": "2020-09-25",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-09-26",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-09-27",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-09-28",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-09-29",
    "ms": 1,
    "nms": 0
  }, {
    "date": "2020-09-30",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-10-01",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-10-02",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-10-03",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-10-04",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-10-05",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-10-06",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-10-07",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-10-08",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-10-09",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-10-10",
    "ms": 1,
    "nms": 0
  }, {
    "date": "2020-10-11",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-10-12",
    "ms": 1,
    "nms": 1
  }, {
    "date": "2020-10-13",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-10-14",
    "ms": 0,
    "nms": 1
  }, {
    "date": "2020-10-15",
    "ms": 0,
    "nms": 1
  }, {
    "date": "2020-10-16",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-10-17",
    "ms": 0,
    "nms": 2
  }, {
    "date": "2020-10-18",
    "ms": 0,
    "nms": 1
  }, {
    "date": "2020-10-19",
    "ms": 1,
    "nms": 0
  }, {
    "date": "2020-10-20",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-10-21",
    "ms": 1,
    "nms": 1
  }, {
    "date": "2020-10-22",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-10-23",
    "ms": 1,
    "nms": 0
  }, {
    "date": "2020-10-24",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-10-25",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-10-26",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-10-27",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-10-28",
    "ms": 0,
    "nms": 1
  }, {
    "date": "2020-10-29",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-10-30",
    "ms": 0,
    "nms": 1
  }, {
    "date": "2020-10-31",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-11-01",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-11-02",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-11-03",
    "ms": 0,
    "nms": 1
  }, {
    "date": "2020-11-04",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-11-05",
    "ms": 1,
    "nms": 0
  }, {
    "date": "2020-11-06",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-11-07",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-11-08",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-11-09",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-11-10",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-11-11",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-11-12",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-11-13",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-11-14",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-11-15",
    "ms": 0,
    "nms": 1
  }, {
    "date": "2020-11-16",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-11-17",
    "ms": 0,
    "nms": 1
  }, {
    "date": "2020-11-18",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-11-19",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-11-20",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-11-21",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-11-22",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-11-23",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-11-24",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-11-25",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-11-26",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-11-27",
    "ms": 0,
    "nms": 1
  }, {
    "date": "2020-11-28",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-11-29",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-11-30",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-12-01",
    "ms": 0,
    "nms": 1
  }, {
    "date": "2020-12-02",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-12-03",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-12-04",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-12-05",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-12-06",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-12-07",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-12-08",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-12-09",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-12-10",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-12-11",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-12-12",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-12-13",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-12-14",
    "ms": 1,
    "nms": 0
  }, {
    "date": "2020-12-15",
    "ms": 0,
    "nms": 1
  }, {
    "date": "2020-12-16",
    "ms": 0,
    "nms": 1
  }, {
    "date": "2020-12-17",
    "ms": 1,
    "nms": 1
  }, {
    "date": "2020-12-18",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-12-19",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-12-20",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-12-21",
    "ms": 0,
    "nms": 1
  }, {
    "date": "2020-12-22",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-12-23",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-12-24",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-12-25",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-12-26",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-12-27",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-12-28",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-12-29",
    "ms": 1,
    "nms": 1
  }, {
    "date": "2020-12-30",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2020-12-31",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-01-01",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-01-02",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-01-03",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-01-04",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-01-05",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-01-06",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-01-07",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-01-08",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-01-09",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-01-10",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-01-11",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-01-12",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-01-13",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-01-14",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-01-15",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-01-16",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-01-17",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-01-18",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-01-19",
    "ms": 1,
    "nms": 0
  }, {
    "date": "2021-01-20",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-01-21",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-01-22",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-01-23",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-01-24",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-01-25",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-01-26",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-01-27",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-01-28",
    "ms": 0,
    "nms": 1
  }, {
    "date": "2021-01-29",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-01-30",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-01-31",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-02-01",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-02-02",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-02-03",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-02-04",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-02-05",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-02-06",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-02-07",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-02-08",
    "ms": 0,
    "nms": 2
  }, {
    "date": "2021-02-09",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-02-10",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-02-11",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-02-12",
    "ms": 2,
    "nms": 2
  }, {
    "date": "2021-02-13",
    "ms": 3,
    "nms": 0
  }, {
    "date": "2021-02-14",
    "ms": 0,
    "nms": 3
  }, {
    "date": "2021-02-15",
    "ms": 0,
    "nms": 1
  }, {
    "date": "2021-02-16",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-02-17",
    "ms": 1,
    "nms": 0
  }, {
    "date": "2021-02-18",
    "ms": 0,
    "nms": 1
  }, {
    "date": "2021-02-19",
    "ms": 2,
    "nms": 1
  }, {
    "date": "2021-02-20",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-02-21",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-02-22",
    "ms": 1,
    "nms": 0
  }, {
    "date": "2021-02-23",
    "ms": 2,
    "nms": 2
  }, {
    "date": "2021-02-24",
    "ms": 1,
    "nms": 1
  }, {
    "date": "2021-02-25",
    "ms": 0,
    "nms": 1
  }, {
    "date": "2021-02-26",
    "ms": 2,
    "nms": 1
  }, {
    "date": "2021-02-27",
    "ms": 2,
    "nms": 3
  }, {
    "date": "2021-02-28",
    "ms": 1,
    "nms": 2
  }, {
    "date": "2021-03-01",
    "ms": 0,
    "nms": 3
  }, {
    "date": "2021-03-02",
    "ms": 1,
    "nms": 1
  }, {
    "date": "2021-03-03",
    "ms": 3,
    "nms": 1
  }, {
    "date": "2021-03-04",
    "ms": 1,
    "nms": 4
  }, {
    "date": "2021-03-05",
    "ms": 2,
    "nms": 2
  }, {
    "date": "2021-03-06",
    "ms": 0,
    "nms": 3
  }, {
    "date": "2021-03-07",
    "ms": 0,
    "nms": 2
  }, {
    "date": "2021-03-08",
    "ms": 1,
    "nms": 2
  }, {
    "date": "2021-03-09",
    "ms": 1,
    "nms": 4
  }, {
    "date": "2021-03-10",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-03-11",
    "ms": 1,
    "nms": 4
  }, {
    "date": "2021-03-12",
    "ms": 0,
    "nms": 4
  }, {
    "date": "2021-03-13",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-03-14",
    "ms": 1,
    "nms": 4
  }, {
    "date": "2021-03-15",
    "ms": 2,
    "nms": 1
  }, {
    "date": "2021-03-16",
    "ms": 0,
    "nms": 3
  }, {
    "date": "2021-03-17",
    "ms": 12,
    "nms": 6
  }, {
    "date": "2021-03-18",
    "ms": 12,
    "nms": 15
  }, {
    "date": "2021-03-19",
    "ms": 10,
    "nms": 9
  }, {
    "date": "2021-03-20",
    "ms": 3,
    "nms": 10
  }, {
    "date": "2021-03-21",
    "ms": 5,
    "nms": 13
  }, {
    "date": "2021-03-22",
    "ms": 3,
    "nms": 5
  }, {
    "date": "2021-03-23",
    "ms": 3,
    "nms": 9
  }, {
    "date": "2021-03-24",
    "ms": 2,
    "nms": 5
  }, {
    "date": "2021-03-25",
    "ms": 2,
    "nms": 8
  }, {
    "date": "2021-03-26",
    "ms": 5,
    "nms": 4
  }, {
    "date": "2021-03-27",
    "ms": 2,
    "nms": 4
  }, {
    "date": "2021-03-28",
    "ms": 3,
    "nms": 11
  }, {
    "date": "2021-03-29",
    "ms": 0,
    "nms": 5
  }, {
    "date": "2021-03-30",
    "ms": 3,
    "nms": 6
  }, {
    "date": "2021-03-31",
    "ms": 3,
    "nms": 4
  }, {
    "date": "2021-04-01",
    "ms": 3,
    "nms": 6
  }, {
    "date": "2021-04-02",
    "ms": 0,
    "nms": 6
  }, {
    "date": "2021-04-03",
    "ms": 0,
    "nms": 1
  }, {
    "date": "2021-04-04",
    "ms": 0,
    "nms": 11
  }, {
    "date": "2021-04-05",
    "ms": 0,
    "nms": 7
  }, {
    "date": "2021-04-06",
    "ms": 1,
    "nms": 4
  }, {
    "date": "2021-04-07",
    "ms": 1,
    "nms": 5
  }, {
    "date": "2021-04-08",
    "ms": 0,
    "nms": 5
  }, {
    "date": "2021-04-09",
    "ms": 0,
    "nms": 3
  }, {
    "date": "2021-04-10",
    "ms": 2,
    "nms": 3
  }, {
    "date": "2021-04-11",
    "ms": 1,
    "nms": 5
  }, {
    "date": "2021-04-12",
    "ms": 0,
    "nms": 5
  }, {
    "date": "2021-04-13",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-04-14",
    "ms": 0,
    "nms": 3
  }, {
    "date": "2021-04-15",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-04-16",
    "ms": 1,
    "nms": 2
  }, {
    "date": "2021-04-17",
    "ms": 1,
    "nms": 0
  }, {
    "date": "2021-04-18",
    "ms": 3,
    "nms": 3
  }, {
    "date": "2021-04-19",
    "ms": 1,
    "nms": 3
  }, {
    "date": "2021-04-20",
    "ms": 1,
    "nms": 1
  }, {
    "date": "2021-04-21",
    "ms": 1,
    "nms": 2
  }, {
    "date": "2021-04-22",
    "ms": 0,
    "nms": 1
  }, {
    "date": "2021-04-23",
    "ms": 0,
    "nms": 1
  }, {
    "date": "2021-04-24",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-04-25",
    "ms": 1,
    "nms": 2
  }, {
    "date": "2021-04-26",
    "ms": 0,
    "nms": 4
  }, {
    "date": "2021-04-27",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-04-28",
    "ms": 0,
    "nms": 3
  }, {
    "date": "2021-04-29",
    "ms": 0,
    "nms": 1
  }, {
    "date": "2021-04-30",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-05-01",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-05-02",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-05-03",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-05-04",
    "ms": 1,
    "nms": 0
  }, {
    "date": "2021-05-05",
    "ms": 2,
    "nms": 0
  }, {
    "date": "2021-05-06",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-05-07",
    "ms": 1,
    "nms": 0
  }, {
    "date": "2021-05-08",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-05-09",
    "ms": 1,
    "nms": 0
  }, {
    "date": "2021-05-10",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-05-11",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-05-12",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-05-13",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-05-14",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-05-15",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-05-16",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-05-17",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-05-18",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-05-19",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-05-20",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-05-21",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-05-22",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-05-23",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-05-24",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-05-25",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-05-26",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-05-27",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-05-28",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-05-29",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-05-30",
    "ms": 1,
    "nms": 0
  }, {
    "date": "2021-05-31",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-06-01",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-06-02",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-06-03",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-06-04",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-06-05",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-06-06",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-06-07",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-06-08",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-06-09",
    "ms": 2,
    "nms": 3
  }, {
    "date": "2021-06-10",
    "ms": 0,
    "nms": 2
  }, {
    "date": "2021-06-11",
    "ms": 0,
    "nms": 2
  }, {
    "date": "2021-06-12",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-06-13",
    "ms": 0,
    "nms": 1
  }, {
    "date": "2021-06-14",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-06-15",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-06-16",
    "ms": 0,
    "nms": 1
  }, {
    "date": "2021-06-17",
    "ms": 0,
    "nms": 1
  }, {
    "date": "2021-06-18",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-06-19",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-06-20",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-06-21",
    "ms": 0,
    "nms": 1
  }, {
    "date": "2021-06-22",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-06-23",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-06-24",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-06-25",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-06-26",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-06-27",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-06-28",
    "ms": 0,
    "nms": 1
  }, {
    "date": "2021-06-29",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-06-30",
    "ms": 0,
    "nms": 1
  }, {
    "date": "2021-07-01",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-07-02",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-07-03",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-07-04",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-07-05",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-07-06",
    "ms": 0,
    "nms": 1
  }, {
    "date": "2021-07-07",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-07-08",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-07-09",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-07-10",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-07-11",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-07-12",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-07-13",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-07-14",
    "ms": 2,
    "nms": 0
  }, {
    "date": "2021-07-15",
    "ms": 1,
    "nms": 0
  }, {
    "date": "2021-07-16",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-07-17",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-07-18",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-07-19",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-07-20",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-07-21",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-07-22",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-07-23",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-07-24",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-07-25",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-07-26",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-07-27",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-07-28",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-07-29",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-07-30",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-07-31",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-08-01",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-08-02",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-08-03",
    "ms": 0,
    "nms": 1
  }, {
    "date": "2021-08-04",
    "ms": 0,
    "nms": 1
  }, {
    "date": "2021-08-05",
    "ms": 0,
    "nms": 1
  }, {
    "date": "2021-08-06",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-08-07",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-08-08",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-08-09",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-08-10",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-08-11",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-08-12",
    "ms": 0,
    "nms": 1
  }, {
    "date": "2021-08-13",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-08-14",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-08-15",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-08-16",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-08-17",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-08-18",
    "ms": 0,
    "nms": 1
  }, {
    "date": "2021-08-19",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-08-20",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-08-21",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-08-22",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-08-23",
    "ms": 0,
    "nms": 1
  }, {
    "date": "2021-08-24",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-08-25",
    "ms": 0,
    "nms": 1
  }, {
    "date": "2021-08-26",
    "ms": 0,
    "nms": 1
  }, {
    "date": "2021-08-27",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-08-28",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-08-29",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-08-30",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-08-31",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-09-01",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-09-02",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-09-03",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-09-04",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-09-05",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-09-06",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-09-07",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-09-08",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-09-09",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-09-10",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-09-11",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-09-12",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-09-13",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-09-14",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-09-15",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-09-16",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-09-17",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-09-18",
    "ms": 0,
    "nms": 1
  }, {
    "date": "2021-09-19",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-09-20",
    "ms": 0,
    "nms": 1
  }, {
    "date": "2021-09-21",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-09-22",
    "ms": 0,
    "nms": 1
  }, {
    "date": "2021-09-23",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-09-24",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-09-25",
    "ms": 1,
    "nms": 1
  }, {
    "date": "2021-09-26",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-09-27",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-09-28",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-09-29",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-09-30",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-10-01",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-10-02",
    "ms": 0,
    "nms": 1
  }, {
    "date": "2021-10-03",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-10-04",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-10-05",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-10-06",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-10-07",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-10-08",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-10-09",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-10-10",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-10-11",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-10-12",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-10-13",
    "ms": 0,
    "nms": 2
  }, {
    "date": "2021-10-14",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-10-15",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-10-16",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-10-17",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-10-18",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-10-19",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-10-20",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-10-21",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-10-22",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-10-23",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-10-24",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-10-25",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-10-26",
    "ms": 0,
    "nms": 1
  }, {
    "date": "2021-10-27",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-10-28",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-10-29",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-10-30",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-10-31",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-11-01",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-11-02",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-11-03",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-11-04",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-11-05",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-11-06",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-11-07",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-11-08",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-11-09",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-11-10",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-11-11",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-11-12",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-11-13",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-11-14",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-11-15",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-11-16",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-11-17",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-11-18",
    "ms": 0,
    "nms": 1
  }, {
    "date": "2021-11-19",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-11-20",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-11-21",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-11-22",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-11-23",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-11-24",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-11-25",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-11-26",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-11-27",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-11-28",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-11-29",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-11-30",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-12-01",
    "ms": 0,
    "nms": 1
  }, {
    "date": "2021-12-02",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-12-03",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-12-04",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-12-05",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-12-06",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-12-07",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-12-08",
    "ms": 0,
    "nms": 0
  }, {
    "date": "2021-12-09",
    "ms": 0,
    "nms": 1
  }]
*/

export function NumberOfArticlesAreaChart({chartData}) {
  const [date, setDate] = React.useState({
    from: new Date(2020, 1, 1),
    to: new Date(2021, 12, 31),
  })

  const [topThemes, setTopThemes] = React.useState([])
  const [topEntities, setTopEntities] = React.useState([])

  const filteredData = chartData.filter((item) => {
    // console.log("called filter")
    const item_date = new Date(item.date)
    const startDate = date?.from
    const endDate = date?.to
    // console.log(item_date, startDate, endDate)
    return item_date >= startDate && item_date <= endDate
  })

  React.useEffect(() => {
    async function getTopThemes() {
      const sql = neon(process.env.NEXT_PUBLIC_DATABASE_URL);
      if (date?.from && date?.to) {
        const response = await sql`
        SELECT c.theme_id, t.name AS theme_name, CAST(COUNT(*) AS INTEGER) AS theme_count
        FROM contains c
        JOIN articles a ON c.article_id = a.id
        JOIN themes t ON c.theme_id = t.id
        WHERE a.date BETWEEN ${date?.from} AND ${date?.to}
        GROUP BY c.theme_id, t.name
        ORDER BY theme_count DESC
        LIMIT 10
        `;
        console.log(response)
        setTopThemes(response);
      }
    }
    async function getTopEntities(){
      const sql = neon(process.env.NEXT_PUBLIC_DATABASE_URL);
      if (date?.from && date?.to) {
        const response = await sql`
        SELECT e.name AS entity_name, CAST(COUNT(*) AS INTEGER) AS entity_count
        FROM entities e
        JOIN articles a ON e.article_id = a.id
        WHERE a.date BETWEEN ${date?.from} AND ${date?.to}
        GROUP BY e.name
        ORDER BY entity_count DESC
        LIMIT 10
        `;
        console.log(response)
        setTopEntities(response);
      }
    }
    getTopThemes();
    getTopEntities();
  }, [date]);
  

  // console.log(filteredData)

  return (
    <>
      <DatePickerWithRange date={date} setDate={setDate} />
      <Card>
        <CardHeader className="flex items-center gap-2 space-y-0 border-b py-5 sm:flex-row">
          <div className="grid flex-1 gap-1 text-center sm:text-left">
            <CardTitle>Number of News Articles</CardTitle>
            <CardDescription>
              Showing total number of news articles across time
            </CardDescription>
          </div>
        </CardHeader>
        <CardContent className="px-2 pt-4 sm:px-6 sm:pt-6">
          <ChartContainer
            config={chartConfig}
            className="aspect-auto h-[200px] w-full"
          >
            <AreaChart data={filteredData}>
              <defs>
                <linearGradient id="fillMs" x1="0" y1="0" x2="0" y2="1">
                  <stop
                    offset="5%"
                    stopColor="var(--color-ms)"
                    stopOpacity={0.8}
                  />
                  <stop
                    offset="95%"
                    stopColor="var(--color-ms)"
                    stopOpacity={0.1}
                  />
                </linearGradient>
                <linearGradient id="fillNms" x1="0" y1="0" x2="0" y2="1">
                  <stop
                    offset="5%"
                    stopColor="var(--color-nms)"
                    stopOpacity={0.8}
                  />
                  <stop
                    offset="95%"
                    stopColor="var(--color-nms)"
                    stopOpacity={0.1}
                  />
                </linearGradient>
              </defs>
              <CartesianGrid vertical={false} />
              <XAxis
                dataKey="date"
                tickLine={false}
                axisLine={false}
                tickMargin={8}
                minTickGap={32}
                tickFormatter={(value) => {
                  const date = new Date(value)
                  return date.toLocaleDateString("en-US", {
                    month: "short",
                    day: "numeric",
                  })
                }}
              />
              <YAxis
                tickLine={false}
                axisLine={false}
                tickMargin={8}
                domain={[0, 15]}
              />
              <ChartTooltip
                cursor={false}
                content={
                  <ChartTooltipContent
                    labelFormatter={(value) => {
                      return new Date(value).toLocaleDateString("en-US", {
                        month: "short",
                        day: "numeric",
                        year: "numeric",
                      })
                    }}
                    indicator="dot"
                  />
                }
              />
              <Area
                type="monotone"
                dataKey="ms"
                stroke="var(--color-ms)"
                fill="url(#fillMs)"
              />
              <Area
                type="monotone"
                dataKey="nms"
                stroke="var(--color-nms)"
                fill="url(#fillNms)"
              />
              <ChartLegend content={<ChartLegendContent />} />
            </AreaChart>
          </ChartContainer>
        </CardContent>
      </Card>

      {/*Top themes and entities*/}
      <div className="grid grid-cols-2 gap-4">
        <Card className="col-span-1">
          <CardHeader>
            <CardTitle>Top-10 Themes</CardTitle>
            <CardDescription>Showing the most mentioned themes</CardDescription>
          </CardHeader>
          <CardContent>
            <table className="w-full divide-y divide-gray-200 transition-opacity">
              <thead className="bg-gray-50">
                <tr>
                  <th
                    scope="col"
                    className="px-6 py-1 text-left text-xs font-medium text-gray-500 tracking-wider w-100"
                  >
                    Theme Name
                  </th>
                  <th
                    scope="col"
                    className="px-6 py-1 text-left text-xs font-medium text-gray-500 tracking-wider"
                  >
                    Mentions
                  </th>
                </tr>
              </thead>
              <tbody className="bg-white divide-y divide-gray-200">
                {topThemes.map((theme) => (
                  <tr key={theme.theme_id}>
                    <td className="px-6 py-2 whitespace-nowrap text-sm font-medium text-gray-900 w-100 text-wrap">
                      {theme.theme_name}
                    </td>
                    <td className="px-6 py-2 whitespace-nowrap text-sm text-gray-500 font-mono">
                      {theme.theme_count}
                    </td>
                  </tr>
                ))}
              </tbody>
            </table>
          </CardContent>
        </Card>
        <Card className="col-span-1">
          <CardHeader>
            <CardTitle>Top-10 People & Organization</CardTitle>
            <CardDescription>Showing the most mentioned people or organizations</CardDescription>
          </CardHeader>
          <CardContent>
            <table className="w-full divide-y divide-gray-200 transition-opacity">
              <thead className="bg-gray-50">
                <tr>
                  <th
                    scope="col"
                    className="px-6 py-1 text-left text-xs font-medium text-gray-500 tracking-wider w-100"
                  >
                    Entity Name
                  </th>
                  <th
                    scope="col"
                    className="px-6 py-1 text-left text-xs font-medium text-gray-500 tracking-wider"
                  >
                    Mentions
                  </th>
                </tr>
              </thead>
              <tbody className="bg-white divide-y divide-gray-200">
                {topEntities.map((entity) => (
                  <tr key={entity.entity_name}>
                    <td className="px-6 py-2 whitespace-nowrap text-sm font-medium text-gray-900 w-100 text-wrap">
                      {entity.entity_name}
                    </td>
                    <td className="px-6 py-2 whitespace-nowrap text-sm text-gray-500 font-mono">
                      {entity.entity_count}
                    </td>
                  </tr>
                ))}
              </tbody>
            </table>
          </CardContent>
        </Card> 
      </div>
    </>
  )
}
